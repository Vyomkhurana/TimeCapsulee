const mongoose = require('mongoose');const mongoURI = process.env.MONGODB_URI || 'mongodb:const RETRY_BASE_MS = parseInt(process.env.MONGO_RETRY_BASE_MS, 10) || 2000; const RETRY_MAX_MS = parseInt(process.env.MONGO_RETRY_MAX_MS, 10) || 5 * 60 * 1000; const options = {    maxPoolSize: 10,     serverSelectionTimeoutMS: 5000,     socketTimeoutMS: 45000,     family: 4 };mongoose.set('strictQuery', false);let connectAttempt = 0;const connectWithRetry = async () => {    try {        await mongoose.connect(mongoURI, options);        connectAttempt = 0;        console.log('âœ… Connected to MongoDB successfully');    } catch (err) {        connectAttempt += 1;        const delay = Math.min(RETRY_BASE_MS * Math.pow(2, connectAttempt - 1), RETRY_MAX_MS);        console.error(`âŒ Failed to connect to MongoDB (attempt ${connectAttempt}):`, err.message);        console.log(`ðŸ”„ Retrying connection in ${Math.round(delay / 1000)}s...`);        setTimeout(connectWithRetry, delay);    }};mongoose.connection.on('connected', () => {    console.log('Mongoose connected to MongoDB');});mongoose.connection.on('error', (err) => {    console.error('Mongoose connection error:', err && err.message ? err.message : err);});mongoose.connection.on('disconnected', () => {    console.log('Mongoose disconnected from MongoDB');});process.on('SIGINT', async () => {    try {        await mongoose.connection.close();        console.log('MongoDB connection closed through app termination');    } catch (e) {        console.error('Error closing MongoDB connection on SIGINT', e && e.message ? e.message : e);    } finally {        process.exit(0);    }});connectWithRetry();module.exports = {    mongoose,    isConnected: () => mongoose.connection.readyState === 1,    closeConnection: () => mongoose.connection.close(),};